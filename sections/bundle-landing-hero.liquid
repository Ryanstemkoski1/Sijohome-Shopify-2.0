{%- assign color_scheme_hash = section.settings.color_scheme.settings.background_gradient | default: section.settings.color_scheme.settings.background | md5 -%}

<div class="bundle-hero color-scheme color-scheme--{{ section.settings.color_scheme.id }} color-scheme--bg-{{ color_scheme_hash }}">
  <div class="bundle-hero__container">
    {%- if section.settings.image != blank or section.settings.mobile_image != blank -%}
      <div class="bundle-hero__media">
        {%- liquid
          assign desktop_image = section.settings.image
          assign mobile_image = section.settings.mobile_image | default: desktop_image
        -%}
        
        <picture class="bundle-hero__picture">
          {%- if mobile_image != blank -%}
            <source media="(max-width: 749px)" srcset="{{ mobile_image | image_url: width: 750 }} 750w, {{ mobile_image | image_url: width: 1500 }} 1500w">
          {%- endif -%}
          {%- if desktop_image != blank -%}
            <img src="{{ desktop_image | image_url: width: 1920 }}"
                 srcset="{{ desktop_image | image_url: width: 1920 }} 1920w, {{ desktop_image | image_url: width: 1440 }} 1440w, {{ desktop_image | image_url: width: 1080 }} 1080w"
                 alt="{{ desktop_image.alt | escape }}"
                 width="{{ desktop_image.width }}"
                 height="{{ desktop_image.height }}"
                 loading="eager"
                 class="bundle-hero__image">
          {%- endif -%}
        </picture>

        {%- if section.settings.apply_overlay -%}
          <div class="bundle-hero__overlay" style="background-color: {{ section.settings.overlay_color }}; opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};"></div>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="bundle-hero__content bundle-hero__content--{{ section.settings.text_position }}">
      <div class="bundle-hero__content-inner">
        {%- if section.settings.subheading != blank -%}
          <p class="bundle-hero__subheading" 
             {% if section.settings.subheading_color != 'rgba(0,0,0,0)' %}style="color: {{ section.settings.subheading_color }}"{% endif %}>
            {{ section.settings.subheading }}
          </p>
        {%- endif -%}

        {%- if section.settings.heading != blank -%}
          <h1 class="bundle-hero__heading" 
              {% if section.settings.heading_color != 'rgba(0,0,0,0)' %}style="color: {{ section.settings.heading_color }}"{% endif %}>
            {{ section.settings.heading }}
          </h1>
        {%- endif -%}

        {%- if section.settings.description != blank -%}
          <div class="bundle-hero__description rte" 
               {% if section.settings.description_color != 'rgba(0,0,0,0)' %}style="color: {{ section.settings.description_color }}"{% endif %}>
            {{ section.settings.description }}
          </div>
        {%- endif -%}

        {%- if section.settings.show_trust_badges -%}
          <div class="bundle-hero__trust-badges">
            {%- if section.settings.show_rating -%}
              <div class="bundle-hero__badge">
                <div class="bundle-hero__stars">
                  {%- for i in (1..5) -%}
                    <span class="bundle-hero__star">‚òÖ</span>
                  {%- endfor -%}
                </div>
                <span class="bundle-hero__rating-text">{{ section.settings.rating_text | default: '4.8/5.0 ‚Ä¢ 1700+ Reviews' }}</span>
              </div>
            {%- endif -%}

            {%- if section.settings.show_shipping -%}
              <div class="bundle-hero__badge">
                <span class="bundle-hero__badge-icon">üöö</span>
                <span class="bundle-hero__badge-text">{{ section.settings.shipping_text | default: 'Free US Shipping & Returns' }}</span>
              </div>
            {%- endif -%}

            {%- if section.settings.show_guarantee -%}
              <div class="bundle-hero__badge">
                <span class="bundle-hero__badge-icon">üõ°Ô∏è</span>
                <span class="bundle-hero__badge-text">{{ section.settings.guarantee_text | default: '100-Night Sleep Trial' }}</span>
              </div>
            {%- endif -%}
          </div>
        {%- endif -%}

        {%- if section.settings.button_text != blank and section.settings.button_url != blank -%}
          <div class="bundle-hero__actions">
            <a href="{{ section.settings.button_url }}" 
               class="bundle-hero__button button button--primary"
               {% if section.settings.button_background != 'rgba(0,0,0,0)' or section.settings.button_text_color != 'rgba(0,0,0,0)' %}
                 style="{% if section.settings.button_background != 'rgba(0,0,0,0)' %}background-color: {{ section.settings.button_background }};{% endif %}{% if section.settings.button_text_color != 'rgba(0,0,0,0)' %}color: {{ section.settings.button_text_color }};{% endif %}"
               {% endif %}>
              {{ section.settings.button_text }}
            </a>

            {%- if section.settings.secondary_button_text != blank and section.settings.secondary_button_url != blank -%}
              <a href="{{ section.settings.secondary_button_url }}" 
                 class="bundle-hero__button bundle-hero__button--secondary button button--secondary">
                {{ section.settings.secondary_button_text }}
              </a>
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

<style>
  .bundle-hero {
    position: relative;
    min-height: 60vh;
    display: flex;
    align-items: center;
    overflow: hidden;
  }

  .bundle-hero__container {
    position: relative;
    width: 100%;
    max-width: var(--page-width);
    margin: 0 auto;
    padding: 0 2rem;
    z-index: 2;
  }

  .bundle-hero__media {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1;
  }

  .bundle-hero__picture {
    display: block;
    width: 100%;
    height: 100%;
  }

  .bundle-hero__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .bundle-hero__overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
  }

  .bundle-hero__content {
    position: relative;
    z-index: 3;
    padding: 4rem 0;
  }

  .bundle-hero__content--left {
    text-align: left;
  }

  .bundle-hero__content--center {
    text-align: center;
  }

  .bundle-hero__content--right {
    text-align: right;
  }

  .bundle-hero__content-inner {
    max-width: 600px;
  }

  .bundle-hero__content--left .bundle-hero__content-inner {
    margin-right: auto;
  }

  .bundle-hero__content--center .bundle-hero__content-inner {
    margin: 0 auto;
  }

  .bundle-hero__content--right .bundle-hero__content-inner {
    margin-left: auto;
  }

  .bundle-hero__subheading {
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin: 0 0 1rem 0;
    opacity: 0.9;
  }

  .bundle-hero__heading {
    font-size: clamp(2.5rem, 6vw, 4rem);
    font-weight: 700;
    line-height: 1.1;
    margin: 0 0 1.5rem 0;
    color: inherit;
  }

  .bundle-hero__description {
    font-size: 1.125rem;
    line-height: 1.6;
    margin: 0 0 2rem 0;
    opacity: 0.9;
  }

  .bundle-hero__trust-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin: 0 0 2rem 0;
    justify-content: inherit;
  }

  .bundle-hero__badge {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 2rem;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .bundle-hero__stars {
    display: flex;
    gap: 0.125rem;
  }

  .bundle-hero__star {
    color: #fbbf24;
    font-size: 1rem;
  }

  .bundle-hero__rating-text,
  .bundle-hero__badge-text {
    font-size: 0.875rem;
    font-weight: 500;
    white-space: nowrap;
  }

  .bundle-hero__badge-icon {
    font-size: 1rem;
  }

  .bundle-hero__actions {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: inherit;
  }

  .bundle-hero__button {
    padding: 1rem 2rem;
    font-size: 1.125rem;
    font-weight: 600;
    text-decoration: none;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
    min-width: 200px;
    text-align: center;
  }

  .bundle-hero__button--secondary {
    background: transparent;
    border: 2px solid currentColor;
  }

  /* Mobile responsiveness */
  @media (max-width: 768px) {
    .bundle-hero {
      min-height: 50vh;
      text-align: center;
    }

    .bundle-hero__container {
      padding: 0 1rem;
    }

    .bundle-hero__content {
      padding: 3rem 0;
    }

    .bundle-hero__content--left,
    .bundle-hero__content--right {
      text-align: center;
    }

    .bundle-hero__content-inner {
      max-width: 100%;
      margin: 0 auto;
    }

    .bundle-hero__heading {
      font-size: clamp(2rem, 8vw, 3rem);
      margin-bottom: 1rem;
    }

    .bundle-hero__description {
      font-size: 1rem;
      margin-bottom: 1.5rem;
    }

    .bundle-hero__trust-badges {
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
    }

    .bundle-hero__badge {
      padding: 0.5rem 0.75rem;
    }

    .bundle-hero__actions {
      flex-direction: column;
      align-items: center;
    }

    .bundle-hero__button {
      width: 100%;
      max-width: 300px;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .bundle-hero__badge {
      background: rgba(0, 0, 0, 0.8);
      border: 2px solid currentColor;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .bundle-hero__button {
      transition: none;
    }
  }
</style>

{% schema %}
{
  "name": "Bundle Landing Hero",
  "class": "shopify-section--bundle-hero",
  "tag": "section",
  "disabled_on": {
    "groups": ["header", "custom.overlay"]
  },
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:global.colors.scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Desktop Image",
      "info": "1920x1080px recommended"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image",
      "info": "750x1000px recommended. Uses desktop image if not set."
    },
    {
      "type": "checkbox",
      "id": "apply_overlay",
      "label": "Apply Overlay",
      "default": false
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Overlay Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay Opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 30,
      "unit": "%"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "select",
      "id": "text_position",
      "label": "Text Position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "richtext",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading Color"
    },
    {
      "type": "richtext",
      "id": "heading",
      "label": "Heading",
      "default": "<p>Complete Your Perfect Sleep Setup</p>"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Experience the ultimate comfort with our carefully curated bedding bundles, designed to transform your sleep sanctuary.</p>"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description Color"
    },
    {
      "type": "header",
      "content": "Trust Badges"
    },
    {
      "type": "checkbox",
      "id": "show_trust_badges",
      "label": "Show Trust Badges",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "label": "Show Rating",
      "default": true
    },
    {
      "type": "text",
      "id": "rating_text",
      "label": "Rating Text",
      "default": "4.8/5.0 ‚Ä¢ 1700+ Reviews"
    },
    {
      "type": "checkbox",
      "id": "show_shipping",
      "label": "Show Shipping Badge",
      "default": true
    },
    {
      "type": "text",
      "id": "shipping_text",
      "label": "Shipping Text",
      "default": "Free US Shipping & Returns"
    },
    {
      "type": "checkbox",
      "id": "show_guarantee",
      "label": "Show Guarantee Badge",
      "default": true
    },
    {
      "type": "text",
      "id": "guarantee_text",
      "label": "Guarantee Text",
      "default": "100-Night Sleep Trial"
    },
    {
      "type": "header",
      "content": "Primary Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Shop Bundle"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL",
      "default": "#Bundle-Form-Anchor"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button Background"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color"
    },
    {
      "type": "header",
      "content": "Secondary Button"
    },
    {
      "type": "text",
      "id": "secondary_button_text",
      "label": "Secondary Button Text"
    },
    {
      "type": "url",
      "id": "secondary_button_url",
      "label": "Secondary Button URL"
    }
  ],
  "presets": [
    {
      "name": "Bundle Landing Hero"
    }
  ]
}
{% endschema %}
